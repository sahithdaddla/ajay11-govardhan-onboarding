<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Onboarding</title>
    <style>
        :root {
            --primary-color: #000000;
            --secondary-color: #0900ad;
            --accent-color: #e74c3c;
            --light-gray: #ffffff;
            --dark-gray: #343a40;
            --border-color: #949393;
            --success-color: #8a0e81;
            --danger-color: #6b21b0;
        }
        
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        
        body {
            background-color: #ffffff;
            color: #212529;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .header h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .header p {
            color: var(--dark-gray);
            font-size: 1.05rem;
        }
        
        .company-logo {
            height: 80px;
            width: 220px;
        }
        
        .form-section {
            margin-bottom: 30px;
            padding: 25px;
            background-color: white;
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }
        
        .section-title {
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: 25px;
            font-weight: 600;
            font-size: 1.25rem;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -10px;
        }
        
        .form-col {
            flex: 1;
            min-width: 200px;
            padding: 0 10px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark-gray);
        }
        
        .required:after {
            content: " *";
            color: red;
        }
        
        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        input[type="number"],
        input[type="file"],
        select,
        textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid rgb(139, 0, 181);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
            border-radius: 4px;
            font-size: 15px;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }
        
        input[readonly] {
            background-color: #ffffff;
            cursor: not-allowed;
        }
        
        .radio-group, .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .radio-group label, .checkbox-group label {
            margin: 0 0 0 10px;
            font-weight: normal;
            cursor: pointer;
        }
        
        .radio-group input, .checkbox-group input {
            cursor: pointer;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            color: white;
            border: none;
            padding: 10px 18px;
            font-size: 15px;
            font-weight: 500;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-primary {
            background-color: var(--secondary-color);
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
        }
        
        .btn-success {
            background-color: var(--success-color);
        }
        
        .btn-success:hover {
            background-color: #218838;
        }
        
        .btn-danger {
            background-color: var(--danger-color);
        }
        
        .btn-danger:hover {
            background-color: #c82333;
        }
        
        .btn-sm {
            padding: 8px 14px;
            font-size: 14px;
        }
        
        .experience-item, .education-item, .certification-item {
            background: var(--light-gray);
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
            position: relative;
        }
        
        .document-upload {
            border: 2px dashed var(--border-color);
            padding: 20px;
            text-align: center;
            border-radius: 4px;
            margin-bottom: 10px;
            transition: border-color 0.2s;
        }
        
        .document-upload:hover {
            border-color: var(--secondary-color);
        }
        
        .document-upload p {
            margin: 10px 0 0;
            color: #6c757d;
            font-size: 14px;
        }
        
        .signature-upload {
            border: 1px solid var(--border-color);
            background: white;
            padding: 20px;
            margin-bottom: 10px;
            border-radius: 4px;
        }
        
        .form-note {
            font-size: 14px;
            color: #6c757d;
            margin-top: 5px;
            font-style: italic;
        }
        
        .input-banner {
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark-gray);
        }
        
        .current-job-toggle {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }
        
        .current-job-toggle label {
            margin-left: 8px;
            margin-bottom: 0;
            cursor: pointer;
        }
        .valid {
            border-color: #28a745 !important;
        }
        .invalid {
            border-color: #dc3545 !important;
        }
        .validation-message {
            font-size: 0.8rem;
            color: #dc3545;
            margin-top: 5px;
            display: none;
        }
        .validation-message.visible {
            display: block;
        }
        .checkbox-group.invalid label:after {
            content: " *";
            color: #dc3545;
        }
        
        @media (max-width: 768px) {
            .form-col {
                flex: 100%;
                margin-bottom: 15px;
            }
            
            .form-section {
                padding: 20px;
            }
        }
        
        /* Additional styles for the form elements */
        .banner {
            background-color: var(--secondary-color);
            color: white;
            padding: 20px 0;
            margin-bottom: 30px;
        }
        
        .banner .container {
            text-align: center;
        }
        
        .banner h2 {
            margin: 0;
            font-size: 2rem;
        }
        
        .banner p {
            margin: 10px 0 0;
            font-size: 1.1rem;
        }
        
        .checkbox-container {
            margin: 20px 0;
        }
        
        .file-input-label {
            display: block;
            padding: 15px;
            border: 2px dashed var(--border-color);
            border-radius: 4px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .file-input-label:hover {
            border-color: var(--secondary-color);
            background-color: rgba(9, 0, 173, 0.05);
        }
        
        .error-message {
            color: var(--accent-color);
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
        }
        
        #submitBtn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 1rem;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            transition: background-color 0.3s;
        }
        
        #submitBtn:hover {
            background-color: #0700a0;
        }
    </style>
</head>
<body>
    
    <div class="container">
        <div class="header">
        <img src="Astolite_Logo-removebg-preview.png" alt="Company Logo" class="company-logo"> 
            <h1>Employee Onboarding Form</h1>
            <p>Please complete all sections of this form to finalize your onboarding process</p>
        </div>

        <form id="onboardingForm" enctype="multipart/form-data">
            <!-- Personal Information -->
            <div class="form-section">
                <h3 class="section-title">Personal Information</h3>
                <div class="form-row">
                    <div class="form-col">
                        <label for="emp_name" class="required">Full Name</label>
                        <div class="form-group">
                            <input type="text" id="emp_name" name="emp_name" placeholder="Full Name" required maxlength="60" minlength="3"  oninput="this.value = this.value.replace(/^[\s]+|[^a-zA-Z\s]/g, '')">
                            <div id="name-error" class="validation-message">Name must be 5-60 alphabetic characters only</div>
                        </div>
                    </div>
                    <div class="form-col">
                        <label for="emp_email" class="required">Email Address</label>
                        <div class="form-group">
                            <input type="email" id="emp_email" name="emp_email" placeholder="Email Address" required minlength="5" maxlength="60">
                            <div id="email-error" class="validation-message">Please enter a valid email address</div>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                   
                    <div class="form-col">
                        <label for="emp_mobile" class="required">Mobile Number(+91)</label>
                        <div class="form-group">
                            <input type="tel" id="emp_mobile" name="emp_mobile" placeholder="Mobile Number" required minlength="10" maxlength="10">
                            <div id="mobile-error" class="validation-message">Please enter a valid 10-digit phone number</div>
                        </div>
                    </div>  
                    <div class="form-col">
                        <label for="emp_alt_mobile">Alternate Mobile Number(Optional)</label>
                        <div class="form-group">
                            <input type="text" id="emp_alt_mobile" placeholder="Alternative Mobile Number" name="emp_alt_mobile" maxlength="10">
                            <div id="emp_alt_mobile-error" class="validation-message"></div>
                        </div>
                    </div>              
                    </div>
                        <div class="form-row">
                            <div class="form-col">
                                <label for="emp_gender" class="required">Gender</label>
                                <div class="form-group">
                                    <select id="emp_gender" name="emp_gender" required>
                                        <option value="">Select Gender</option>
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                        <option value="Others">Others</option>
                                    </select>
                                </div>
                            </div>
                        
                            <div class="form-col">
                                <label for="emp_marital_status" class="required">Marital Status</label>
                                <div class="form-group">
                                    <select id="emp_marital_status" name="emp_marital_status" required>
                                        <option value="">Select Marital Status</option>
                                        <option value="Single">Single</option>
                                        <option value="Married">Married</option>
                                        <option value="Divorced">Divorced</option>
                                        <option value="Widowed">Widowed</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <label for="emp_dob" class="required">Date of Birth</label>
                                <div class="form-group">
                                    <input type="date" id="emp_dob" name="emp_dob" required>
                                    <div id="dob-error" class="validation-message">Employee must be at least 20 years old</div>
                                </div>
                            </div>
                        
                            <div class="form-col">
                                <label for="emp_profile_pic" class="required">Profile Picture</label>
                                <div class="form-group">
                                    <input type="file" id="emp_profile_pic" name="emp_profile_pic" accept=".jpg, .png" required>
                                    <div id="profile-pic-error" class="validation-message">Please upload a profile picture (JPG/PNG, max 2MB)</div>
                                </div>
                            </div>
                        </div>
                        
                <div class="form-row">
                    <div class="form-col">
                        <label for="emp_aadhaar" class="required">Aadhaar Number</label>
                        <div class="form-group">
                            <input type="text" id="emp_aadhaar" name="emp_aadhaar" placeholder="Aadhaar Number" required minlength="12" maxlength="12">
                            <div id="emp_aadhaar-error" class="validation-message">Aadhaar must be exactly 12 digits</div>
                        </div>
                    </div>
                    <div class="form-col">
                        <label for="emp_pan" class="required">PAN Card Number</label>
                        <div class="form-group">
                            <input type="text" id="emp_pan" name="emp_pan" placeholder="PAN Card Number" required minlength="10" maxlength="10">
                            <div id="emp_pan-error" class="validation-message">PAN must be 10 alphanumeric characters (e.g., ABCDE1234F)</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Address Information -->
            <div class="form-section">
                <h3 class="section-title">Address Information</h3>
                <div class="form-row">
                    <div class="form-col">
                        <label for="emp_address" class="required">Street Address</label>
                        <div class="form-group">
                            <input type="text" id="emp_address" name="emp_address" placeholder="Street Address" required minlength="5" maxlength="60">
                            <div id="address-error" class="validation-message">Address must be 5-40 characters</div>
                        </div>
                    </div>
                    <div class="form-col">
                        <label for="emp_city" class="required">City</label>
                        <div class="form-group">
                            <input type="text" id="emp_city" name="emp_city" placeholder="City" required minlength="3" maxlength="60"  oninput="this.value = this.value.replace(/^[\s]+|[^a-zA-Z\s]/g, '')">
                            <div id="city-error" class="validation-message">Please enter a valid city name</div>
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-col">
                        <label for="emp_state" class="required">State</label>
                        <div class="form-group">
                            <select id="emp_state" name="emp_state" required>
                                <option value="">Select State</option>
                                    <option value="Andhra Pradesh">Andhra Pradesh</option>
                                    <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                    <option value="Assam">Assam</option>
                                    <option value="Bihar">Bihar</option>
                                    <option value="Chhattisgarh">Chhattisgarh</option>
                                    <option value="Goa">Goa</option>
                                    <option value="Gujarat">Gujarat</option>
                                    <option value="Haryana">Haryana</option>
                                    <option value="Himachal Pradesh">Himachal Pradesh</option>
                                    <option value="Jharkhand">Jharkhand</option>
                                    <option value="Karnataka">Karnataka</option>
                                    <option value="Kerala">Kerala</option>
                                    <option value="Madhya Pradesh">Madhya Pradesh</option>
                                    <option value="Maharashtra">Maharashtra</option>
                                    <option value="Manipur">Manipur</option>
                                    <option value="Meghalaya">Meghalaya</option>
                                    <option value="Mizoram">Mizoram</option>
                                    <option value="Nagaland">Nagaland</option>
                                    <option value="Odisha">Odisha</option>
                                    <option value="Punjab">Punjab</option>
                                    <option value="Rajasthan">Rajasthan</option>
                                    <option value="Sikkim">Sikkim</option>
                                    <option value="Tamil Nadu">Tamil Nadu</option>
                                    <option value="Telangana">Telangana</option>
                                    <option value="Tripura">Tripura</option>
                                    <option value="Uttar Pradesh">Uttar Pradesh</option>
                                    <option value="Uttarakhand">Uttarakhand</option>
                                    <option value="West Bengal">West Bengal</option>
                                    <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
                                    <option value="Chandigarh">Chandigarh</option>
                                    <option value="Dadra and Nagar Haveli and Daman and Diu">Dadra and Nagar Haveli and Daman and Diu</option>
                                    <option value="Lakshadweep">Lakshadweep</option>
                                    <option value="Delhi">Delhi</option>
                                    <option value="Puducherry">Puducherry</option>
                            </select>
                            <div id="state-error" class="validation-message">Please select a state</div>
                        </div>
                    </div>
                    <div class="form-col">
                        <label for="emp_zipcode" class="required">Zip/Postal Code</label>
                        <div class="form-group">
                            <input type="text" id="emp_zipcode" name="emp_zipcode" placeholder="Zip/Postal Code" required minlength="6" maxlength="6">
                            <div id="zipcode-error" class="validation-message">Please enter a valid 6-digit zip code</div>
                        </div>
                    </div>
                </div>
            </div>

           <!-- Bank Details -->
<div class="form-section">
    <h3 class="section-title">Bank Details</h3>
    <div class="form-row">
        <div class="form-col">
            <label for="emp_bank" class="required">Bank Name</label>
            <div class="form-group">
                <input type="text" id="emp_bank" name="emp_bank" placeholder="Bank Name" required minlength="3" maxlength="60" oninput="this.value = this.value.replace(/^[\s]+|[^a-zA-Z\s]/g, '')">
                <div id="bank-error" class="validation-message">Please enter a valid bank name</div>
            </div>
        </div>
        <div class="form-col">
            <label for="emp_account" class="required">Account Number</label>
            <div class="form-group">
                <input type="text" id="emp_account" name="emp_account" placeholder="Account Number" required minlength="9" maxlength="18" oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                <div id="account-error" class="validation-message">Account number must be 9-18 digits</div>
            </div>
        </div>
    </div>
    
    <div class="form-row">
        <div class="form-col">
            <label for="emp_ifsc" class="required">IFSC Code</label>
            <div class="form-group">
                <input type="text" id="emp_ifsc" name="emp_ifsc" placeholder="IFSC Code" required minlength="11" maxlength="11" oninput="this.value = this.value.toUpperCase()">
                <div id="ifsc-error" class="validation-message">Please enter a valid IFSC code (e.g. ABCD0123456)</div>
            </div>
        </div>
        <div class="form-col">
            <label for="emp_bank_branch" class="required">Branch Location</label>
            <div class="form-group">
                <input type="text" id="emp_bank_branch" name="emp_bank_branch" placeholder="Branch Location" required minlength="3" maxlength="60"  oninput="this.value = this.value.replace(/^[\s]+|[^a-zA-Z\s]/g, '')">
                <div id="bank-branch-error" class="validation-message">Please enter a valid branch location</div>
            </div>
        </div>
    </div>
</div>

            <!-- Employment Details -->
            <div class="form-section">
                <h3 class="section-title">Employment Details</h3>
                <div class="form-row">
                    <div class="form-col">
                        <label for="emp_job_role" class="required">Job Role</label>
                        <div class="form-group">
                            <select id="emp_job_role" name="emp_job_role" required>
                                <option value="">Select Job Role</option>
                                    <option value="Software Developer">Software Developer</option>
                                    <option value="Web Developer">Web Developer</option>
                                    <option value="Database Administrator">Backend Developer</option>
                                    <option value="Software Tester">Software Tester</option>
                                    <option value="System Administrator">Java Developer</option>
                                    <option value="Security Analyst">Python Developer</option>
                                    <option value="Cloud Engineer">Cloud Engineer</option>
                                    <option value="Data Scientist">Data Scientist</option>
                                    <option value="Business Analyst">Business Analyst</option>
                                    <option value="DevOps Engineer">DevOps Engineer</option>
                                    <option value="Machine Learning Engineer">Machine Learning Engineer</option>
                                    <option value="Project Manager">Project Manager</option>
                                    <option value="Full Stack Developer">Full Stack Developer</option>
                                    <option value="Accounting">Accounting</option>
                                    <option value="Human Resource">Human Resource</option>
                                    <option value="Administration">Administration</option>
                            </select>
                            <div id="job-error" class="validation-message">Please select a job role</div>
                        </div>
                    </div>
                    <div class="form-col">
                        <label for="emp_department" class="required">Department</label>
                        <div class="form-group">
                            <select id="emp_department" name="emp_department" required>
                                 <option value="">Select Department</option>
                                     <option value="Engineering">Engineering</option>
                                     <option value="Product">Product</option>
                                     <option value="Design">Design</option>
                                     <option value="Data Science">Data Science</option>
                                     <option value="Human Resources">Human Resources</option>
                            </select>
                            <div id="dept-error" class="validation-message">Please select a department</div>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <label for="emp_joining_date" class="required">Immediate Joining Date</label>
                        <div class="form-group">
                            <input type="date" id="emp_joining_date" name="emp_joining_date" required>
                            <div id="joining-error" class="validation-message"></div>
                        </div>
                    </div>
                </div>
               
                    <div class="form-row">
                        <div class="form-col">
                            <label class="required" for="emp_experience_status">Experience Status:</label>
                            <div class="form-group">
                                <select id="emp_experience_status" name="emp_experience_status" required>
                                    <option value="">Select Experience</option>
                                    <option value="Fresher">Fresher</option>
                                    <option value="Experienced">Experienced</option>
                                </select>
                                <div id="exp-status-error" class="validation-message">Please select experience status</div>
                            </div>
                        </div>
                    </div>
            
                    <div id="experienceFields" style="display:none;">
                        <div class="form-row">
                            <div class="form-col">
                                <label for="emp_company_name" class="required">Previous Company Name</label>
                                <div class="form-group">
                                    <input type="text" id="emp_company_name" name="emp_company_name" placeholder="Previous Company Name" minlength="3" maxlength="60" oninput="this.value = this.value.replace(/[^a-zA-Z ]/g, '').replace(/^ +/, '')">
                                    <div id="company-error" class="validation-message">Please enter a valid company name (3-60 characters, letters only)</div>
                                </div>
                            </div>

                            <div class="form-col">
                                <label for="emp_years_of_experience" class="required">Years of Experience (Total)</label>
                                <div class="form-group">
                                    <input type="text" id="emp_years_of_experience" name="emp_years_of_experience" placeholder="Years of Experience" maxlength="5">
                                    <div id="exp-years-error" class="validation-message">Please enter valid years (0.1-40.0, max 2 decimal places)</div>
                                </div>
                            </div>
                        
                        </div>
                        <div class="form-row">
                            <div class="form-col">
                                <label for="emp_uan" class="required">UAN Number</label>
                                <div class="form-group">
                                    <input type="text" id="emp_uan" name="emp_uan" placeholder="Enter UAN number" maxlength="12" oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                                    <div id="uan-error" class="validation-message">Please enter a valid 12-digit UAN number (cannot start with 0)</div>
                                </div>
                            </div>
                            <div class="form-col">
                                <label for="emp_pf" class="required">PF Number</label>
                                <div class="form-group">
                                    <input type="text" id="emp_pf" name="emp_pf" placeholder="Enter PF number" maxlength="25">
                                    <div id="pf-error" class="validation-message">Please enter a valid PF number</div>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-col">
                                <label for="emp_offer_letter" class="required">Previous Company Offer Letter (PDF only)</label>
                                <div class="form-group">
                                    <input type="file" id="emp_offer_letter" name="emp_offer_letter" accept=".pdf">
                                    <div id="offer-letter-error" class="validation-message">Please upload a PDF file (max 2MB)</div>
                                </div>
                            </div>
                            <div class="form-col">
                                <label for="emp_relieving_letter" class="required">Relieving Letter (PDF only)</label>
                                <div class="form-group">
                                    <input type="file" id="emp_relieving_letter" name="emp_relieving_letter" accept=".pdf">
                                    <div id="relieving-letter-error" class="validation-message">Please upload a PDF file (max 2MB)</div>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-col">
                                <label for="emp_experience_certificate"  class="required">Experience Certificate (PDF only)</label>
                                <div class="form-group">
                                    <input type="file" id="emp_experience_certificate" name="emp_experience_certificate" accept=".pdf">
                                    <div id="experience-cert-error" class="validation-message">Please upload a PDF file (max 2MB)</div>
                                </div>
                            </div>
                            <div class="form-col">
                                <label for="emp_salary_slip" class="required">Last Salary Slip (PDF only)</label>
                                <div class="form-group">
                                    <input type="file" id="emp_salary_slip" name="emp_salary_slip" accept=".pdf">
                                    <div id="salary-slip-error" class="validation-message">Please upload a PDF file (max 2MB)</div>
                                </div>
                            </div>
                        </div>
                    </div>
            
                  

              
            </div>

            <!-- Education Documents -->
<div class="form-section">
    <h3 class="section-title">Education Documents</h3>
    
    <div class="education-item">
        <h4>SSC (10th Grade)</h4>
        <div class="form-row">
            <div class="form-col">
                <label for="ssc_school" class="required">School Name</label>
                <div class="form-group">
                    <input type="text" id="ssc_school" name="ssc_school" required minlength="3" maxlength="60">
                    <div id="ssc-school-error" class="validation-message"></div>
                </div>
            </div>
            <div class="form-col">
                <label for="ssc_year" class="required">Year of Completion</label>
                <div class="form-group">
                    <input type="text" id="ssc_year" name="ssc_year" required maxlength="4">
                    <div id="ssc-year-error" class="validation-message"></div>
                </div>
            </div>
            <div class="form-col">
                <label for="ssc_grade" class="required">Percentage/CGPA</label>
                <div class="form-group">
                    <input type="text" id="ssc_grade" name="ssc_grade" required minlength="1" maxlength="4">
                    <div id="ssc-grade-error" class="validation-message"></div>
                </div>
            </div>
        </div>
        <!-- SSC Upload Field -->
        <div class="form-row">
            <div class="form-col">
                <label for="emp_ssc_doc" class="required">Upload SSC Certificate (PDF only)</label>
                <div class="form-group">
                    <input type="file" id="emp_ssc_doc" name="emp_ssc_doc" required accept=".pdf">
                    <div id="ssc-error" class="validation-message">Only PDF file (max 2MB)</div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="education-item">
        <h4>Intermediate/Diploma</h4>
        <div class="form-row">
            <div class="form-col">
                <label for="inter_college" class="required">College Name</label>
                <div class="form-group">
                    <input type="text" id="inter_college" name="inter_college" required minlength="3" maxlength="60">
                    <div id="inter-college-error" class="validation-message"></div>
                </div>
            </div>
            <div class="form-col">
                <label for="inter_year" class="required">Year of Completion</label>
                <div class="form-group">
                    <input type="number" id="inter_year" name="inter_year" required maxlength="4">
                    <div id="inter-year-error" class="validation-message"></div>
                </div>
            </div>
            <div class="form-col">
                <label for="inter_grade" class="required">Percentage/CGPA</label>
                <div class="form-group">
                    <input type="text" id="inter_grade" name="inter_grade" required minlength="1" maxlength="4">
                    <div id="inter-grade-error" class="validation-message"></div>
                </div>
            </div>
        </div>
        <div class="form-row">
            <div class="form-col">
                <label for="inter_branch" class="required">Branch/Stream</label>
                <div class="form-group">
                    <input type="text" id="inter_branch" name="inter_branch" required minlength="3" maxlength="60">
                    <div id="inter-branch-error" class="validation-message"></div>
                </div>
            </div>
        </div>
        <!-- Intermediate Upload Field -->
        <div class="form-row">
            <div class="form-col">
                <label for="emp_inter_doc" class="required">Upload Intermediate Certificate (PDF only)</label>
                <div class="form-group">
                    <input type="file" id="emp_inter_doc" name="emp_inter_doc" required accept=".pdf">
                    <div id="inter-error" class="validation-message">Only PDF file (max 2MB)</div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="education-item">
        <h4>Graduation</h4>
        <div class="form-row">
            <div class="form-col">
                <label for="grad_college" class="required">University/College Name</label>
                <div class="form-group">
                    <input type="text" id="grad_college" name="grad_college" required minlength="3" maxlength="60">
                    <div id="grad-college-error" class="validation-message"></div>
                </div>
            </div>
                <div class="form-col">
                    <label for="grad_year" class="required">Year of Completion</label>
                    <div class="form-group">
                        <input type="number" id="grad_year" name="grad_year" required maxlength="4">
                        <div id="grad-year-error" class="validation-message"></div>
                    </div>
                </div>
            <div class="form-col">
                <label for="grad_grade" class="required">Percentage/CGPA</label>
                <div class="form-group">
                    <input type="text" id="grad_grade" name="grad_grade" required minlength="1" maxlength="4">
                    <div id="grad-grade-error" class="validation-message"></div>
                </div>
            </div>
        </div>
        <div class="form-row">
            <div class="form-col">
                <label for="grad_degree" class="required">Degree</label>
                <div class="form-group">
                    <input type="text" id="grad_degree" name="grad_degree" required minlength="3" maxlength="30">
                    <div id="grad-degree-error" class="validation-message"></div>
                </div>
            </div>
            <div class="form-col">
                <label for="grad_branch" class="required">Branch/Stream</label>
                <div class="form-group">
                    <input type="text" id="grad_branch" name="grad_branch" required minlength="3" maxlength="30">
                    <div id="grad-branch-error" class="validation-message"></div>
                </div>
            </div>
        </div>
        <!-- Graduation Upload Field -->
        <div class="form-row">
            <div class="form-col">
                <label for="emp_grad_doc" class="required">Upload Graduation Certificate (PDF only)</label>
                <div class="form-group">
                    <input type="file" id="emp_grad_doc" name="emp_grad_doc" required accept=".pdf">
                    <div id="grad-error" class="validation-message">Only PDF file (max 2MB)</div>
                </div>
            </div>
        </div>
    </div>
</div>

           <!-- Additional Documents -->
<div class="form-section">
    <h3 class="section-title">Additional Documents</h3>

    <!-- Resume -->
    <div class="form-row">
        <div class="form-col">
            <label for="resume" class="required">Upload Resume/CV (PDF Max 2MB) </label>
            <div class="form-group">
                <input type="file" id="resume" name="resume" required accept=".pdf">
                <div id="resume-error" class="validation-message">Only PDF file (max 2MB)</div>
            </div>
        </div>
    </div>

    <!-- ID Proof -->
    <div class="form-row">
        <div class="form-col">
            <label for="id_proof" class="required">Upload ID Proof (Aadhaar/PAN/Passport) Only PDF, JPG, or PNG files (max 2MB)</label>
            <div class="form-group">
                <input type="file" id="id_proof" name="id_proof" required accept=".pdf,.jpg,.png">
                <div id="id-proof-error" class="validation-message">Only PDF, JPG, or PNG files (max 2MB)</div>
            </div>
        </div>
    </div>

    <!-- Signed Offer Letter -->
    <div class="form-row">
        <div class="form-col">
            <label for="signed_document" class="required">Upload Signed Offer Letter Only PDF files (max 2MB)</label>
            <div class="form-group">
                <input type="file" id="signed_document" name="signed_document" required accept=".pdf">
                <div id="signed-doc-error" class="validation-message">Only PDF file (max 2MB)</div>
            </div>
        </div>
    </div>
</div>

    <div class="form-group checkbox-group">
                <input type="checkbox" id="emp_terms_accepted" name="emp_terms_accepted" required>
                <label for="emp_terms_accepted" class="required">I certify that the information provided in this form is true and complete to the best of my knowledge. I understand that any false statements or comissions may be grounds for termination of employment.
                    I consent to the processing of my personal data for the purpose of employment and onboarding in accordance with the company's privacy policy.<div id="terms-error" class="validation-message">You must accept the terms and conditions</div></label>
                
            </div>

            <div class="form-group">
                <button type="submit" id="submitBtn" class="btn btn-primary btn-block">Complete Onboarding</button>
            </div>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Updated regex patterns based on requirements
            const nameRegex = /^[A-Za-z]{3,60}$/; 
            const emailRegex = /^[a-zA-Z0-9]{1}(?:[a-zA-Z0-9]+[._-]?)*[a-zA-Z0-9]{1}@(gmail|outlook)\.(com|in|org|co)$/;
            const mobileRegex = /^[6789]\d{9}$/;
            const addressRegex = /^[A-Za-z0-9][A-Za-z0-9\s,.\-\/#]{2,78}[A-Za-z0-9]$/; 
            const cityRegex = /^[A-Za-z]{3,60}$/; 
            const zipRegex = /^[1-9][0-9]{5}$/;
            const bankRegex = /^[A-Za-z]+(?:[ \-][A-Za-z]+)*$/; 
            const accountRegex = /^(?!0+$)[0-9]{9,18}$/;
            const ifscRegex = /^[A-Z]{4}0[A-Z0-9]{6}$/; 
            const bankBranchRegex = /^[A-Za-z]{3,60}$/; 
            const companyRegex = /^[A-Za-z][A-Za-z\s-]{1,58}[A-Za-z]$/; 
            const expYearsRegex = /^([0-3]?\d)(\.\d{1,2})?$/; 
            const aadhaarRegex = /^[1-9]\d{11}$/;
            const schoolRegex = /^[A-Za-z]+(?:[ \-][A-Za-z]+)*$/;  
            const yearRegex = /^(19|20)\d{2}$/;
            const gradeRegex = /^(?:[4-9]|\d{2}|100)(?:\.\d{1,2})?$/;
            const branchRegex = /^[A-Za-z]{3,60}$/; 
            const degreeRegex = /^[A-Za-z]+(?:[ \-][A-Za-z]+)*$/; 
            const pdfRegex = /\.pdf$/i;
            const imageRegex = /\.(jpg|jpeg|png)$/i;
            const docRegex = /\.(doc|docx)$/i;
            const altMobileRegex = /^[6789]\d{9}$/;
            const uanRegex = /^[1-9]\d{11}$/;
            const pfRegex = /^[A-Z]{2}\/[A-Z]{3}\/\d{7}$/i;
            
            // Get current date in IST (India Standard Time)
            const now = new Date();
            const indiaOffset = 330; // IST is UTC+5:30 (330 minutes)
            const indiaNow = new Date(now.getTime() + (indiaOffset - now.getTimezoneOffset()) * 60000);
            
            // Set joining date range (today to 6 months in future)
            const joiningDateInput = document.getElementById('emp_joining_date');
            const sixMonthsLater = new Date(indiaNow);
            sixMonthsLater.setMonth(sixMonthsLater.getMonth() + 6);
            
            joiningDateInput.min = formatDateForInput(indiaNow);
            joiningDateInput.max = formatDateForInput(sixMonthsLater);
            // Removed: joiningDateInput.value = formatDateForInput(indiaNow);
            
            // Set DOB range (20-60 years)
            const dobInput = document.getElementById('emp_dob');
            const minDobDate = new Date(indiaNow);
            minDobDate.setFullYear(minDobDate.getFullYear() - 60);
            const maxDobDate = new Date(indiaNow);
            maxDobDate.setFullYear(maxDobDate.getFullYear() - 20);
            
            dobInput.max = formatDateForInput(maxDobDate);
            dobInput.min = formatDateForInput(minDobDate);
        
            // Helper function to format date as YYYY-MM-DD
            function formatDateForInput(date) {
                const d = new Date(date);
                let month = '' + (d.getMonth() + 1);
                let day = '' + d.getDate();
                const year = d.getFullYear();
                
                if (month.length < 2) month = '0' + month;
                if (day.length < 2) day = '0' + day;
                
                return [year, month, day].join('-');
            }
            
            // Function to clean input - remove leading/trailing spaces and consecutive spaces/special chars
            function cleanInput(input) {
                let value = input.value.trim();
                value = value.replace(/\s+/g, ' '); // Replace multiple spaces with single space
                input.value = value;
                return value;
            }
            
            // Function to clean and capitalize name fields
            function cleanAndCapitalizeName(input) {
                let value = cleanInput(input);
                // Remove any non-alphabetic characters
                // value = value.replace(/[^A-Za-z]/g, '');
                // Limit to 60 characters
                value = value.substring(0, 60);
                value = value.toLowerCase().replace(/\b\w/g, char => char.toUpperCase());
                input.value = value;
                return value;
            }
            
            // Function to clean alphabetic fields (no numbers or special chars)
            function cleanAlphabeticInput(input) {
                let value = input.value.trim();
                // Remove any non-alphabetic characters
                value = value.replace(/[^A-Za-z]/g, '');
                // Limit to 60 characters
                value = value.substring(0, 60);
                input.value = value;
                return value;
            }
            
            // Function to clean address field (allows - , . / # but no consecutive special chars)
            function cleanAddressInput(input) {
                let value = input.value.trim();
                // Remove unwanted special characters and consecutive special chars
                value = value.replace(/[^A-Za-z0-9\s,.\-\/#]/g, '')
                            .replace(/([.,\-\/#])\1+/g, '$1')
                            .replace(/\s+/g, ' ');
                // Limit to 80 characters
                value = value.substring(0, 80);
                input.value = value;
                return value;
            }
            
            
            // Function to clean and validate email
            function cleanEmail(input) {
                let value = input.value.trim();
                // Remove all spaces from email
                value = value.replace(/\s+/g, '');
                // Convert to lowercase
                value = value.toLowerCase();
                input.value = value;
                return value;
            }
        
            // Experience fields toggle
            const experienceStatus = document.getElementById('emp_experience_status');
            const experienceFields = document.getElementById('experienceFields');
            
            experienceStatus.addEventListener('change', function() {
                experienceFields.style.display = this.value === 'Experienced' ? 'block' : 'none';
                
                const experienceFieldsToToggle = [
                    'emp_company_name', 'emp_years_of_experience', 
                    'emp_salary_slip', 'emp_offer_letter',
                    'emp_relieving_letter', 'emp_experience_certificate',
                     'emp_uan', 'emp_pf'
                ];
                
                experienceFieldsToToggle.forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    if (this.value === 'Experienced') {
                        field.setAttribute('required', '');
                    } else {
                        field.removeAttribute('required');
                        if (field.type === 'file') {
                            field.value = '';
                        } else {
                            field.value = '';
                        }
                    }
                });
            });
            
            // Initialize experience fields visibility
            experienceFields.style.display = experienceStatus.value === 'Experienced' ? 'block' : 'none';
        
            // Add event listeners for all input fields to validate on blur
            const allInputs = document.querySelectorAll('input, select, textarea');
            allInputs.forEach(input => {
                if (input.type !== 'file') {
                    input.addEventListener('blur', function() {
                        // Clean input based on type before validation
                        switch(this.id) {
                            case 'emp_name':
                            case 'emp_bank':
                            case 'emp_bank_branch':
                            case 'ssc_school':
                            case 'inter_college':
                            case 'grad_college':
                            case 'inter_branch':
                            case 'grad_branch':
                            case 'grad_degree':
                                cleanAndCapitalizeName(this);
                                break;
                            case 'emp_city':
                                cleanAlphabeticInput(this);
                                break;
                            case 'emp_address':
                                cleanAddressInput(this);
                                break;
                            case 'emp_email':
                                cleanEmail(this);
                                break;
                            case 'emp_company_name':
                                // For company name (allows single space/hyphen)
                                let value = cleanInput(this);
                                value = value.replace(/[^A-Za-z\s-]/g, '')
                                             .replace(/\s+/g, ' ')
                                             .replace(/-+/g, '-')
                                             .replace(/\s*-\s*/g, '-')
                                             .substring(0, 60);
                                this.value = value;
                                break;
                            default:
                                cleanInput(this);
                        }
                        validateField(this);
                    });
                }
            });
        
            // Function to validate a field based on its ID
            function validateField(field) {
                const fieldId = field.id;
                
                switch(fieldId) {
                    case 'emp_name': return validateName();
                    case 'emp_email': return validateEmail();
                    case 'emp_dob': 
                        validateDOB();
                        validateEducationYearSequence();
                        return true;
                    case 'emp_mobile': return validateMobile();
                    case 'emp_alt_mobile': return validateAltMobile();
                    case 'emp_aadhaar': return validateAadhaar();
                    case 'emp_address': return validateAddress();
                    case 'emp_city': return validateCity();
                    case 'emp_state': return validateState();
                    case 'emp_zipcode': return validateZipcode();
                    case 'emp_bank': return validateBank();
                    case 'emp_account': return validateAccount();
                    case 'emp_uan': return validateUAN();
                    case 'emp_pf': return validatePF();
                    case 'emp_ifsc': return validateIFSC();
                    case 'emp_bank_branch': return validateBankBranch();
                    case 'emp_job_role': return validateJobRole();
                    case 'emp_department': return validateDepartment();
                    case 'emp_experience_status': return validateExperienceStatus();
                    case 'emp_company_name': return validateCompany();
                    case 'emp_years_of_experience': return validateExpYears();
                    case 'emp_joining_date': return validateJoiningDate();
                    case 'ssc_school': return validateSSCSchool();
                    case 'ssc_year': 
                        validateSSCYear();
                        validateEducationYearSequence();
                        return true;
                    case 'ssc_grade': return validateSSCGrade();
                    case 'inter_college': return validateInterCollege();
                    case 'inter_year': 
                        validateInterYear();
                        validateEducationYearSequence();
                        return true;
                    case 'inter_grade': return validateInterGrade();
                    case 'inter_branch': return validateInterBranch();
                    case 'grad_college': return validateGradCollege();
                    case 'grad_year': 
                        validateGradYear();
                        validateEducationYearSequence();
                        return true;
                    case 'grad_grade': return validateGradGrade();
                    case 'grad_degree': return validateGradDegree();
                    case 'grad_branch': return validateGradBranch();
                    default: return true;
                }
            }
        
            // Validate education year sequence with flexible year requirements
function validateEducationYearSequence() {
    const sscYear = document.getElementById('ssc_year').value;
    const interYear = document.getElementById('inter_year').value;
    const gradYear = document.getElementById('grad_year').value;
    const currentYear = indiaNow.getFullYear();

    // Validate SSC year is at least 12 years after birth
    const dob = document.getElementById('emp_dob').value;
    if (dob && sscYear) {
        const dobYear = new Date(dob).getFullYear();
        const minSSCYear = dobYear + 12;

        if (parseInt(sscYear) < minSSCYear) {
            showError(document.getElementById('ssc_year'),
                      document.getElementById('ssc-year-error'),
                      `SSC must be completed at least 12 years after birth (minimum year: ${minSSCYear})`);
            return false;
        }

        // SSC year should not be in the future beyond a reasonable limit
        if (parseInt(sscYear) > currentYear + 2) {
            showError(document.getElementById('ssc_year'),
                      document.getElementById('ssc-year-error'),
                      `SSC year cannot be after ${currentYear + 2}`);
            return false;
        }

        // SSC year should not be too far in the past
        if (parseInt(sscYear) < currentYear - 50) {
            showError(document.getElementById('ssc_year'),
                      document.getElementById('ssc-year-error'),
                      'SSC year is too far in the past');
            return false;
        }
    }

    // Validate Intermediate: must be at least 2 years after SSC
    if (sscYear && interYear) {
        const sscYearInt = parseInt(sscYear);
        const interYearInt = parseInt(interYear);

        if (interYearInt < sscYearInt + 2) {
            showError(document.getElementById('inter_year'),
                      document.getElementById('inter-year-error'),
                      `Intermediate must be at least 2 years after SSC (minimum year: ${sscYearInt + 2})`);
            return false;
        }

        // Intermediate year should not be in the future beyond a reasonable limit
        if (interYearInt > currentYear + 2) {
            showError(document.getElementById('inter_year'),
                      document.getElementById('inter-year-error'),
                      `Intermediate year cannot be after ${currentYear + 2}`);
            return false;
        }

        // Intermediate year should not be too far in the past
        if (interYearInt < currentYear - 50) {
            showError(document.getElementById('inter_year'),
                      document.getElementById('inter-year-error'),
                      'Intermediate year is too far in the past');
            return false;
        }
    }

    // Validate Graduation: must be at least 3 years after Intermediate
    if (interYear && gradYear) {
        const interYearInt = parseInt(interYear);
        const gradYearInt = parseInt(gradYear);

        if (gradYearInt < interYearInt + 3) {
            showError(document.getElementById('grad_year'),
                      document.getElementById('grad-year-error'),
                      `Graduation must be at least 3 years after Intermediate (minimum year: ${interYearInt + 3})`);
            return false;
        }

        // Graduation year should not be in the future beyond a reasonable limit
        if (gradYearInt > currentYear + 2) {
            showError(document.getElementById('grad_year'),
                      document.getElementById('grad-year-error'),
                      `Graduation year cannot be after ${currentYear + 2}`);
            return false;
        }

        // Graduation year should not be too far in the past
        if (gradYearInt < currentYear - 50) {
            showError(document.getElementById('grad_year'),
                      document.getElementById('grad-year-error'),
                      'Graduation year is too far in the past');
            return false;
        }
    }

    return true;
}
            // Enhanced grade validation (4-100 for %, 4-10 for CGPA)
            function validateGradeField(input, errorId) {
                const error = document.getElementById(errorId);
                let value = input.value.trim();
        
                // Remove any spaces and normalize
                value = value.replace(/\s/g, '');
        
                // Extract numeric part and detect if user explicitly added %
                const isExplicitPercentage = value.includes('%');
                const numericValue = value.replace('%', '');
                
                if (!value) {
                    showError(input, error, 'Percentage/CGPA is required');
                    return false;
                }
        
                // Validate format using regex: numbers from 4 to 100 with optional 1-2 decimals
                const gradeRegex = /^(?:[4-9]|\d{2}|100)(?:\.\d{1,2})?$/;
                if (!gradeRegex.test(numericValue)) {
                    showError(input, error, 'Invalid format. Use 4-100% or 4.0-10.0');
                    return false;
                }
        
                // Parse the number
                const numericValueFloat = parseFloat(numericValue);
        
                // Auto-detect percentage if value is over 10 or has %
                const isPercentage = isExplicitPercentage || numericValueFloat > 10;
        
                // Split into integer and decimal parts
                const parts = numericValue.split('.');
                const integerPart = parts[0];
                const decimalPart = parts[1] || '';
        
                // Validate integer part
                if (integerPart.length > 3 || parseInt(integerPart) < 4) {
                    showError(input, error, isPercentage ?
                        'Percentage must be between 4 and 100' :
                        'CGPA must be between 4.0 and 10.0');
                    return false;
                }
        
                // Validate decimal part (1 or 2 digits max)
                if (decimalPart && (decimalPart.length < 1 || decimalPart.length > 2)) {
                    showError(input, error, 'Use 1 or 2 decimal places (e.g. 9.1, 90.12)');
                    return false;
                }
        
                // Final range validation
                if (isPercentage) {
                    if (numericValueFloat < 4 || numericValueFloat > 100) {
                        showError(input, error, 'Percentage must be between 4% and 100%');
                        return false;
                    }
                } else {
                    if (numericValueFloat < 4 || numericValueFloat > 10) {
                        showError(input, error, 'CGPA must be between 4.0 and 10.0');
                        return false;
                    }
                }
        
                // Format value for display (preserve decimals, trim .0 if needed)
                if (isPercentage) {
                    input.value = numericValueFloat.toFixed(decimalPart.length || 0).replace(/\.0+$/, '') + '%';
                } else {
                    input.value = numericValueFloat.toFixed(decimalPart.length || 0).replace(/\.0+$/, '');
                }
        
                showSuccess(input, error);
                return true;
            }
        
            // Helper functions for showing validation states
            function showError(input, errorElement, message) {
                input.classList.add('invalid');
                input.classList.remove('valid');
                errorElement.textContent = message;
                errorElement.style.display = 'block';
            }
        
            function showSuccess(input, errorElement) {
                input.classList.remove('invalid');
                input.classList.add('valid');
                errorElement.style.display = 'none';
            }
        
            // File upload validations
            document.getElementById('emp_profile_pic').addEventListener('change', validateProfilePic);
            document.getElementById('emp_salary_slip').addEventListener('change', validateSalarySlip);
            document.getElementById('emp_offer_letter').addEventListener('change', validateOfferLetter);
            document.getElementById('emp_relieving_letter').addEventListener('change', validateRelievingLetter);
            document.getElementById('emp_experience_certificate').addEventListener('change', validateExperienceCertificate);
            document.getElementById('emp_ssc_doc').addEventListener('change', validateSSCDoc);
            document.getElementById('emp_inter_doc').addEventListener('change', validateInterDoc);
            document.getElementById('emp_grad_doc').addEventListener('change', validateGradDoc);
            document.getElementById('resume').addEventListener('change', validateResume);
            document.getElementById('id_proof').addEventListener('change', validateIdProof);
            document.getElementById('signed_document').addEventListener('change', validateSignedDoc);
            
            // Terms checkbox
            document.getElementById('emp_terms_accepted').addEventListener('change', validateTerms);
        
            // Form submission
            const form = document.getElementById('onboardingForm');
            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                if (validateForm()) {
                    try {
                        const formData = new FormData(form);
                        const submitBtn = document.getElementById('submitBtn');
                        submitBtn.disabled = true;
                        submitBtn.textContent = 'Submitting...';
        
                        const response = await fetch('http://16.170.235.131:3069/save-employee', {
                            method: 'POST',
                            body: formData
                        });
        
                        if (!response.ok) {
                            let errorData;
                            try {
                                errorData = await response.json();
                            } catch (jsonError) {
                                const text = await response.text();
                                throw new Error(text || 'Submission failed');
                            }
                            throw new Error(errorData.error || 'Submission failed');
                        }
        
                        const data = await response.json();
        
                        if (data.success) {
                            alert('Onboarding form submitted successfully!');
                            form.reset();
                            document.querySelectorAll('.valid, .invalid').forEach(el => {
                                el.classList.remove('valid', 'invalid');
                            });
                        }
                    } catch (error) {
                        console.error('Error:', error);
                        let errorMessage = 'Error submitting form';
                        if (error.message.includes('Failed to fetch')) {
                            errorMessage = 'Failed to connect to server. Please check your connection.';
                        } else if (error.message.includes('NetworkError')) {
                            errorMessage = 'Network error occurred. Please try again.';
                        } else {
                            errorMessage = error.message || 'An unexpected error occurred';
                        }
                        alert(errorMessage);
                    } finally {
                        const submitBtn = document.getElementById('submitBtn');
                        if (submitBtn) {
                            submitBtn.disabled = false;
                            submitBtn.textContent = 'Complete Onboarding';
                        }
                    }
                }
            });
        
            // ============ INDIVIDUAL VALIDATION FUNCTIONS ============
        
            function validateName() {
                const name = document.getElementById('emp_name');
                const error = document.getElementById('name-error');
                let value = name.value.trim().replace(/[^a-zA-Z\s]/g, '');

                // Capitalize each word
                value = value.replace(/\b\w/g, char => char.toUpperCase());
                name.value = value; // update the input with cleaned value

                if (!value) {
                    showError(name, error, 'Full name is required');
                    return false;
                }

                if (value.length < 3) {
                    showError(name, error, 'Full name must be at least 3 characters');
                    return false;
                }

                const nameRegex = /^[A-Za-z\s]{3,100}$/;
                if (!nameRegex.test(value)) {
                    showError(name, error, 'Only letters and spaces are allowed');
                    return false;
                }

                const words = value.trim().split(/\s+/);
                if (words.length < 2) {
                    showError(name, error, 'Please enter both first and last name');
                    return false;
                }

                showSuccess(name, error);
                return true;
            }
        
function validateEmail() {
    const email = document.getElementById('emp_email');
    const error = document.getElementById('email-error');
    const value = email.value.trim().toLowerCase();

    // Check minimum 3 characters before @
    const atIndex = value.indexOf('@');
    if (atIndex < 3) {
        showError(email, error, 'Must have at least 3 characters before @');
        return false;
    }

    // Check no consecutive special characters
    if (/([._-])\1/.test(value)) {
        showError(email, error, 'Cannot have consecutive special characters');
        return false;
    }

    // Check doesn't start with special character
    if (/^[._-]/.test(value)) {
        showError(email, error, 'Cannot start with special character');
        return false;
    }

    if (!value) {
        showError(email, error, 'Email address is required');
        return false;
    }

    if (!emailRegex.test(value)) {
        showError(email, error, 'Email must be a valid Gmail or Outlook address (e.g. user.name@gmail.com)');
        return false;
    }

    showSuccess(email, error);
    return true;
}
        
            function validateDOB() {
                const dob = document.getElementById('emp_dob');
                const error = document.getElementById('dob-error');
                
                if (!dob.value) {
                    showError(dob, error, 'Date of birth is required');
                    return false;
                }
                
                const dobDate = new Date(dob.value);
                const minAgeDate = new Date(indiaNow);
                minAgeDate.setFullYear(minAgeDate.getFullYear() - 60);
                const maxAgeDate = new Date(indiaNow);
                maxAgeDate.setFullYear(maxAgeDate.getFullYear() - 20);
                
                if (dobDate < minAgeDate || dobDate > maxAgeDate) {
                    showError(dob, error, 'Age must be between 20 and 60 years');
                    return false;
                }
                
                showSuccess(dob, error);
                return true;
            }
            
            function validateMobile() {
                const mobile = document.getElementById('emp_mobile');
                const error = document.getElementById('mobile-error');
                const value = cleanInput(mobile);
                const altMobile = document.getElementById('emp_alt_mobile').value;
                
                if (!value) {
                    showError(mobile, error, 'Mobile number is required');
                    return false;
                }
                
                if (!mobileRegex.test(value)) {
                    showError(mobile, error, 'Please enter a valid 10-digit mobile number starting with 6-9');
                    return false;
                }

                if (altMobile && value === altMobile) {
                    showError(mobile, error, 'Mobile number must be different from alternate mobile number');
                    return false;
                }
                
                showSuccess(mobile, error);
                return true;
            }
        
            function validateAltMobile() {
                const altMobile = document.getElementById('emp_alt_mobile');
                const error = document.getElementById('emp_alt_mobile-error');
                const value = cleanInput(altMobile);
                const mobile = document.getElementById('emp_mobile').value;
                
                if (value && !mobileRegex.test(value)) {
                    showError(altMobile, error, 'Please enter a valid 10-digit mobile number starting with 6-9');
                    return false;
                }
                
                if (value && mobile && value === mobile) {
                    showError(altMobile, error, 'Alternate mobile number must be different from mobile number');
                    return false;
                }
                
                showSuccess(altMobile, error);
                return true;
            }
            
            function validateAadhaar() {
                const aadhaar = document.getElementById('emp_aadhaar');
                const error = document.getElementById('emp_aadhaar-error');
                let value = cleanInput(aadhaar).replace(/\D/g, '');
                
                if (value.length > 12) {
                    value = value.slice(0, 12);
                }
                aadhaar.value = value;
                
                if (!value) {
                    showError(aadhaar, error, 'Aadhaar number is required');
                    return false;
                }
                
                if (value.length !== 12) {
                    showError(aadhaar, error, 'Aadhaar must be exactly 12 digits');
                    return false;
                }
                
                if (!aadhaarRegex.test(value)) {
                    showError(aadhaar, error, 'Aadhaar must be 12 digits starting with 1-9');
                    return false;
                }
                
                showSuccess(aadhaar, error);
                return true;
            }

            function validatePAN(input) {
                const error = document.getElementById('emp_pan-error');
                let value = cleanInput(input).toUpperCase().replace(/[^A-Z0-9]/g, '');
                
                if (value.length > 10) {
                    value = value.slice(0, 10);
                }
                input.value = value;
                
                if (!value) {
                    showError(input, error, 'PAN number is required');
                    return false;
                }
                
                if (!/^[A-Z]{5}[0-9]{4}[A-Z]$/.test(value)) {
                    showError(input, error, 'PAN must be 10 alphanumeric characters (e.g., ABCDE1234F)');
                    return false;
                }
                
                showSuccess(input, error);
                return true;
            }
            
            function validateAddress() {
                const address = document.getElementById('emp_address');
                const error = document.getElementById('address-error');
                const value = address.value.trim();

                if (!value) {
                    showError(address, error, 'Address is required');
                    return false;
                }

                if (value.length < 5 || value.length > 120) {
                    showError(address, error, 'Address must be 5-120 characters');
                    return false;
                }

                // Accepts starting values like "P.No", "H.No", numbers, and combinations with slashes, dashes, dots, commas, spaces
                const addressRegex = /^(P\.?No\.?|H\.?No\.?|[\d]+)?[\w\s\-\/.,]{4,}$/i;

                if (!addressRegex.test(value)) {
                    showError(address, error, 'Please enter a valid address (e.g., H.No 1-85/4, P.No. 12/A)');
                    return false;
                }

                showSuccess(address, error);
                return true;
            }
            
            function validateCity() { 
                const city = document.getElementById('emp_city');
                const error = document.getElementById('city-error');
                const value = cleanAlphabeticInput(city);
                
                if (!value) {
                    showError(city, error, 'City name is required');
                    return false;
                }

                if (value.length < 3) {
                    showError(city, error, 'City name must be at least 3 characters');
                    return false;
                }
                
                if (!cityRegex.test(value)) {
                    showError(city, error, 'Please enter a valid city name (alphabets only, no numbers or special characters)');
                    return false;
                }
                
                showSuccess(city, error);
                return true;
            }
        
            function validateState() {
                const state = document.getElementById('emp_state');
                const error = document.getElementById('state-error');
                
                if (!state.value) {
                    showError(state, error, 'Please select a state');
                    return false;
                }
                
                showSuccess(state, error);
                return true;
            }
        
            function validateZipcode() {
                const zipcode = document.getElementById('emp_zipcode');
                const error = document.getElementById('zipcode-error');
                const value = cleanInput(zipcode);
                
                if (!value) {
                    showError(zipcode, error, 'Zip/Postal code is required');
                    return false;
                }
                
                if (!zipRegex.test(value)) {
                    showError(zipcode, error, 'Please enter a valid 6-digit zip code');
                    return false;
                }
                
                showSuccess(zipcode, error);
                return true;
            }
        
            function validateBank() {
                const bank = document.getElementById('emp_bank');
                const error = document.getElementById('bank-error');
                const value = cleanAndCapitalizeName(bank);

                if (!value) {
                    showError(bank, error, 'Bank name is required');
                    return false;
                }

                if (value.length < 3) {
                    showError(bank, error, 'Bank name must be at least 3 characters long');
                    return false;
                }

                if (!bankRegex.test(value)) {
                    showError(bank, error, 'Please enter a valid bank name (alphabets only, no numbers or special characters)');
                    return false;
                }

                showSuccess(bank, error);
                return true;
            }
        
            function validateAccount() {
                const account = document.getElementById('emp_account');
                const error = document.getElementById('account-error');
                const value = cleanInput(account);
                
                if (!value) {
                    showError(account, error, 'Account number is required');
                    return false;
                }
                
                if (!accountRegex.test(value)) {
                    showError(account, error, 'Enter a valid account number (9-18 digits)');
                    return false;
                }
                
                showSuccess(account, error);
                return true;
            }
        
            function validateIFSC() {
                const ifsc = document.getElementById('emp_ifsc');
                const error = document.getElementById('ifsc-error');
                const value = cleanInput(ifsc).toUpperCase();

                if (!value) {
                    showError(ifsc, error, 'IFSC code is required');
                    return false;
                }

                // Step 1: Basic format
                const ifscRegex = /^[A-Z]{4}0[A-Z0-9]{6}$/;
                if (!ifscRegex.test(value)) {
                    showError(ifsc, error, 'Enter valid IFSC (e.g., SBIN0001234)');
                    return false;
                }

                // Step 2: Check that last 6 characters include at least one digit
                const branchCode = value.substring(5); // last 6 characters
                if (!/[0-9]/.test(branchCode)) {
                    showError(ifsc, error, 'Branch code must include at least one digit (e.g., 1234AB)');
                    return false;
                }

                showSuccess(ifsc, error);
                return true;
            }
            
            function validateBankBranch() {
                const bankBranch = document.getElementById('emp_bank_branch');
                const error = document.getElementById('bank-branch-error');
                const value = cleanAndCapitalizeName(bankBranch);
                
                if (!value) {
                    showError(bankBranch, error, 'Branch Nameis required (3-60 alphabetic characters)');
                    return false;
                }
                
                if (value.length < 3 || value.length > 60) {
                    showError(bankBranch, error, 'Branch location must be between 3 and 60 alphabetic characters');
                    return false;
                }
                
                if (!bankBranchRegex.test(value)) {
                    showError(bankBranch, error, 'Please enter a valid branch location (alphabets only)');
                    return false;
                }
                
                showSuccess(bankBranch, error);
                return true;
            }
        
            function validateJobRole() {
                const job = document.getElementById('emp_job_role');
                const error = document.getElementById('job-error');
                
                if (!job.value) {
                    showError(job, error, 'Please select a job role');
                    return false;
                }
                
                showSuccess(job, error);
                return true;
            }
        
            function validateDepartment() {
                const dept = document.getElementById('emp_department');
                const error = document.getElementById('dept-error');
                
                if (!dept.value) {
                     showError(dept, error, 'Please select a department');
                    return false;
                }
                
                showSuccess(dept, error);
                return true;
            }
        
            function validateExperienceStatus() {
                const expStatus = document.getElementById('emp_experience_status');
                const error = document.getElementById('exp-status-error');
                
                if (!expStatus.value) {
                    showError(expStatus, error, 'Please select experience status');
                    return false;
                }
                
                showSuccess(expStatus, error);
                return true;
            }
        
            function validateCompany() {
                const company = document.getElementById('emp_company_name');
                const error = document.getElementById('company-error');
                const value = cleanInput(company);
                
                if (experienceStatus.value === 'Experienced' && !value) {
                    showError(company, error, 'Previous company name is required for experienced candidates (3-60 characters)');
                    return false;
                }
                
                if (experienceStatus.value === 'Experienced' && (value.length < 3 || value.length > 60)) {
                    showError(company, error, 'Company name must be between 3 and 60 characters');
                    return false;
                }
                
                if (experienceStatus.value === 'Experienced' && !companyRegex.test(value)) {
                    showError(company, error, 'Please enter a valid company name (alphabets with optional single space/hyphen)');
                    return false;
                }
                
                showSuccess(company, error);
                return true;
            }
        
            function validateExpYears() {
    const expYears = document.getElementById('emp_years_of_experience');
    const error = document.getElementById('exp-years-error');
    let value = expYears.value.trim();

    // Allow only digits and one dot
    value = value.replace(/[^0-9.]/g, '');
    const parts = value.split('.');
    if (parts.length > 2) {
        value = parts[0] + '.' + parts[1];
    }

    // Limit to 2 digits after decimal
    if (parts[1] && parts[1].length > 2) {
        parts[1] = parts[1].substring(0, 2);
        value = parts[0] + '.' + parts[1];
    }

    expYears.value = value;

    if (experienceStatus.value === 'Experienced' && !value) {
        showError(expYears, error, 'Years of experience is required');
        return false;
    }

    if (value) {
        if (!/^\d+(\.\d{1,2})?$/.test(value)) {
            showError(expYears, error, 'Enter years with up to 2 decimals (e.g., 1.12)');
            return false;
        }

        const numValue = parseFloat(value);
        if (isNaN(numValue) || numValue < 0.1 || numValue > 40) {
            showError(expYears, error, 'Must be between 0.1 and 40.0');
            return false;
        }

        // Check if decimal part is greater than 12
        if (parts.length === 2 && parseInt(parts[1], 10) > 12) {
            showError(expYears, error, 'Decimal part must be ≤ 12');
            return false;
        }

        expYears.value = numValue.toFixed(2).replace(/\.?0+$/, '');
    }

    showSuccess(expYears, error);
    return true;
}

            function validateUAN() {
    const uan = document.getElementById('emp_uan');
    const error = document.getElementById('uan-error');
    const value = uan.value.trim();

    // Check length and numeric pattern
    if (!value) {
        showError(uan, error, 'UAN number is required');
        return false;
    }

    if (!/^\d{12}$/.test(value)) {
        showError(uan, error, 'UAN must be exactly 12 digits');
        return false;
    }
     if (!/^[1-9][0-9]{11}$/.test(value)) {
        showError(uan, error, 'UAN must be 12 digits and must not start with 0');
        return false;
    }
    if (value === '000000000000') {
        showError(uan, error, 'UAN number cannot be all zeros');
        return false;
    }

    showSuccess(uan, error);
    return true;
}
function validatePF() {
    const pf = document.getElementById('emp_pf');
    const error = document.getElementById('pf-error');
    const value = pf.value.trim().toUpperCase(); // Convert to uppercase for consistency

    if (!value) {
        showError(pf, error, 'PF number is required');
        return false;
    }

    // Basic alphanumeric validation (no special characters including /)
    if (!/^[A-Z0-9]+$/.test(value)) {
        showError(pf, error, 'PF number must contain only letters and numbers (no special characters)');
        return false;
    }

    // Length validation (8-25 characters)
    if (value.length < 8 || value.length > 25) {
        showError(pf, error, 'PF number must be 8-25 characters long');
        return false;
    }

    // Common format patterns (without slashes)
    const validFormats = [
        /^[A-Z]{5}\d{8,20}$/,     // MHBAN000001600000000134 format
        /^[A-Z]{5}\d{11,15}$/,    // MAMUM00641480000001258 format
        /^[A-Z]{2}[A-Z0-9]{6,18}$/ // TNMAS0002659000 format
    ];

    const isValidFormat = validFormats.some(format => format.test(value));
    
    if (!isValidFormat) {
        showError(pf, error, 'Please enter a valid PF number format. Examples: TNMAS0002659000 or MHBAN0000016000');
        return false;
    }

    // Additional validation - cannot be all zeros
    if (/^0+$/.test(value)) {
        showError(pf, error, 'PF number cannot be all zeros');
        return false;
    }

    showSuccess(pf, error);
    return true;
}
           function validateJoiningDate() {
    const joiningDate = document.getElementById('emp_joining_date');
    const error = document.getElementById('joining-error');
    
    if (!joiningDate.value) {
        showError(joiningDate, error, 'Joining date is required');
        return false;
    }
    
    const joinDate = new Date(joiningDate.value);
    const today = new Date(indiaNow);
    today.setHours(0, 0, 0, 0);
    
    // Allow today and future dates
    if (joinDate < today) {
        showError(joiningDate, error, 'Joining date cannot be in the past');
        return false;
    }
    
    showSuccess(joiningDate, error);
    return true;
}
        
            function validateSSCSchool() {
                const school = document.getElementById('ssc_school');
                const error = document.getElementById('ssc-school-error');
                const value = cleanAndCapitalizeName(school);
                
                if (!value) {
                    showError(school, error, 'School name is required (3-60 alphabetic characters)');
                    return false;
                }
                
                if (value.length < 3 || value.length > 60) {
                    showError(school, error, 'School name must be between 3 and 60 alphabetic characters');
                    return false;
                }
                
                if (!schoolRegex.test(value)) {
                    showError(school, error, 'Please enter a valid school name (alphabets only)');
                    return false;
                }
                
                showSuccess(school, error);
                return true;
            }
        
            function validateInterCollege() {
                const college = document.getElementById('inter_college');
                const error = document.getElementById('inter-college-error');
                const value = cleanAndCapitalizeName(college);
                
                if (!value) {
                    showError(college, error, 'College name is required (3-60 alphabetic characters)');
                    return false;
                }
                
                if (value.length < 3 || value.length > 60) {
                    showError(college, error, 'College name must be between 3 and 60 alphabetic characters');
                    return false;
                }
                
                if (!schoolRegex.test(value)) {
                    showError(college, error, 'Please enter a valid college name (alphabets only)');
                    return false;
                }
                
                showSuccess(college, error);
                return true;
            }
    
            function validateGradCollege() {
                const college = document.getElementById('grad_college');
                const error = document.getElementById('grad-college-error');
                const value = cleanAndCapitalizeName(college);
                
                if (!value) {
                    showError(college, error, 'University/College name is required (3-60 alphabetic characters)');
                    return false;
                }
                
                if (value.length < 3 || value.length > 60) {
                    showError(college, error, 'University/College name must be between 3 and 60 alphabetic characters');
                    return false;
                }
                
                if (!schoolRegex.test(value)) {
                    showError(college, error, 'Please enter a valid university/college name (alphabets only)');
                    return false;
                }
                
                showSuccess(college, error);
                return true;
            }
        
            function validateSSCYear() {
                return validateYearField(document.getElementById('ssc_year'), 'ssc-year-error');
            }
        
            function validateInterYear() {
                return validateYearField(document.getElementById('inter_year'), 'inter-year-error');
            }
        
            function validateGradYear() {
                return validateYearField(document.getElementById('grad_year'), 'grad-year-error');
            }
        
            function validateYearField(input, errorId) {
                const error = document.getElementById(errorId);
                const currentYear = indiaNow.getFullYear();
                
                // Remove all non-numeric characters
                input.value = input.value.replace(/\D/g, '');
                
                // Limit to 4 digits
                if (input.value.length > 4) {
                    input.value = input.value.slice(0, 4);
                }
                
                // Validate the year
                let isValid = false;
                if (input.value.length === 4) {
                    const year = parseInt(input.value, 10);
                    if (year >= 1950 && year <= currentYear + 2) {
                        isValid = true;
                    }
                }
        
                // Show/hide error message
                if (!isValid && input.value.length > 0) {
                    showError(input, error, 'Please enter a valid year (1950-' + (currentYear + 2) + ')');
                    return false;
                } else if (input.value.length === 0) {
                    showError(input, error, 'Year of completion is required');
                    return false;
                }
        
                showSuccess(input, error);
                return true;
            }
        
            function validateSSCGrade() {
                return validateGradeField(document.getElementById('ssc_grade'), 'ssc-grade-error');
            }
        
            function validateInterGrade() {
                return validateGradeField(document.getElementById('inter_grade'), 'inter-grade-error');
            }
        
            function validateGradGrade() {
                return validateGradeField(document.getElementById('grad_grade'), 'grad-grade-error');
            }
        
           
            function validateInterBranch() {
                const branch = document.getElementById('inter_branch');
                const error = document.getElementById('inter-branch-error');
                const value = cleanAndCapitalizeName(branch);
                
                if (!value) {
                    showError(branch, error, 'Branch/Stream is required (3-60 alphabetic characters)');
                    return false;
                }
                
                if (value.length < 3 || value.length > 60) {
                    showError(branch, error, 'Branch/Stream must be between 3 and 60 alphabetic characters');
                    return false;
                }
                
                if (!branchRegex.test(value)) {
                    showError(branch, error, 'Please enter a valid branch/stream (alphabets only)');
                    return false;
                }
                
                showSuccess(branch, error);
                return true;
            }
        
            function validateGradBranch() {
                const branch = document.getElementById('grad_branch');
                const error = document.getElementById('grad-branch-error');
                const value = cleanAndCapitalizeName(branch);
                
                if (!value) {
                    showError(branch, error, 'Branch/Stream is required (3-60 alphabetic characters)');
                    return false;
                }
                
                if (value.length < 3 || value.length > 60) {
                    showError(branch, error, 'Branch/Stream must be between 3 and 60 alphabetic characters');
                    return false;
                }
                
                if (!branchRegex.test(value)) {
            showError(branch, error, 'Please enter a valid branch/stream (alphabets only)');
            return false;
        }
        
        showSuccess(branch, error);
        return true;
    }

    function validateGradDegree() {
        const degree = document.getElementById('grad_degree');
        const error = document.getElementById('grad-degree-error');
        const value = cleanAndCapitalizeName(degree);
        
        if (!value) {
            showError(degree, error, 'Degree is required (3-60 alphabetic characters)');
            return false;
        }
        
        if (value.length < 3 || value.length > 60) {
            showError(degree, error, 'Degree must be between 3 and 60 alphabetic characters');
            return false;
        }
        
        if (!degreeRegex.test(value)) {
            showError(degree, error, 'Please enter a valid degree (alphabets only)');
            return false;
        }
        
        showSuccess(degree, error);
        return true;
    }

    function validateProfilePic() {
        const profilePic = document.getElementById('emp_profile_pic');
        const error = document.getElementById('profile-pic-error');
        
        if (profilePic.files.length === 0) {
            showError(profilePic, error, 'Profile picture is required');
            return false;
        }
        
        const file = profilePic.files[0];
        const maxSize = 2 * 1024 * 1024; // 2MB
        
        if (!file.type.match('image.*')) {
            showError(profilePic, error, 'Only image files are allowed (JPG, PNG)');
            profilePic.value = ''; // Clear the invalid file
            return false;
        }
        
        if (file.size > maxSize) {
            showError(profilePic, error, 'File size exceeds 2MB limit');
            profilePic.value = ''; // Clear the invalid file
            return false;
        }
        
        showSuccess(profilePic, error);
        return true;
    }

    function validateSalarySlip() {
        const salarySlip = document.getElementById('emp_salary_slip');
        const error = document.getElementById('salary-slip-error');
        
        if (experienceStatus.value === 'Experienced' && salarySlip.files.length === 0) {
            showError(salarySlip, error, 'Salary slip is required for experienced candidates');
            return false;
        }
        
        if (salarySlip.files.length > 0 && !validateFile(salarySlip, ['application/pdf'])) {
            showError(salarySlip, error, 'Only PDF files are allowed (max 2MB)');
            salarySlip.value = ''; // Clear the invalid file
            return false;
        }
        
        showSuccess(salarySlip, error);
        return true;
    }

    function validateOfferLetter() {
        const offerLetter = document.getElementById('emp_offer_letter');
        const error = document.getElementById('offer-letter-error');
        
        if (experienceStatus.value === 'Experienced' && offerLetter.files.length === 0) {
            showError(offerLetter, error, 'Offer letter is required for experienced candidates');
            return false;
        }
        
        if (offerLetter.files.length > 0 && !validateFile(offerLetter, ['application/pdf'])) {
            showError(offerLetter, error, 'Only PDF files are allowed (max 2MB)');
            offerLetter.value = ''; // Clear the invalid file
            return false;
        }
        
        showSuccess(offerLetter, error);
        return true;
    }

    function validateRelievingLetter() {
    const relievingLetter = document.getElementById('emp_relieving_letter');
    const error = document.getElementById('relieving-letter-error');
    
    // If no file is uploaded, it's allowed (optional)
    if (relievingLetter.files.length === 0) {
        showSuccess(relievingLetter, error);
        return true;
    }
    
    // If a file is uploaded, validate it
    if (!validateFile(relievingLetter, ['application/pdf'])) {
        showError(relievingLetter, error, 'Only PDF files are allowed (max 2MB)');
        relievingLetter.value = ''; // Clear invalid file
        return false;
    }
    
    showSuccess(relievingLetter, error);
    return true;
}

function validateExperienceCertificate() {
    const expCert = document.getElementById('emp_experience_certificate');
    const error = document.getElementById('experience-cert-error');
    
    // If no file is uploaded, it's allowed (optional)
    if (expCert.files.length === 0) {
        showSuccess(expCert, error);
        return true;
    }
    
    // If a file is uploaded, validate it
    if (!validateFile(expCert, ['application/pdf'])) {
        showError(expCert, error, 'Only PDF files are allowed (max 2MB)');
        expCert.value = ''; // Clear invalid file
        return false;
    }
    
    showSuccess(expCert, error);
    return true;
}

    function validateSSCDoc() {
        const sscDoc = document.getElementById('emp_ssc_doc');
        const error = document.getElementById('ssc-error');
        
        if (sscDoc.files.length === 0) {
            showError(sscDoc, error, 'SSC document is required');
            return false;
        }
        
        if (!validateFile(sscDoc, ['application/pdf'])) {
            showError(sscDoc, error, 'Only PDF files are allowed (max 2MB)');
            return false;
        }
        
        showSuccess(sscDoc, error);
        return true;
    }

    function validateInterDoc() {
        const interDoc = document.getElementById('emp_inter_doc');
        const error = document.getElementById('inter-error');
        
        if (interDoc.files.length === 0) {
            showError(interDoc, error, 'Intermediate document is required');
            return false;
        }
        
        if (!validateFile(interDoc, ['application/pdf'])) {
            showError(interDoc, error, 'Only PDF files are allowed (max 2MB)');
            return false;
        }
        
        showSuccess(interDoc, error);
        return true;
    }

    function validateGradDoc() {
        const gradDoc = document.getElementById('emp_grad_doc');
        const error = document.getElementById('grad-error');
        
        if (gradDoc.files.length > 0 && !validateFile(gradDoc, ['application/pdf'])) {
            showError(gradDoc, error, 'Only PDF files are allowed (max 2MB)');
            return false;
        }
        
        showSuccess(gradDoc, error);
        return true;
    }

    function validateResume() {
        const resume = document.getElementById('resume');
        const error = document.getElementById('resume-error');
        
        if (resume.files.length > 0 && !validateFile(resume, ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'])) {
            showError(resume, error, 'Only PDF, DOC, or DOCX files are allowed (max 2MB)');
            return false;
        }
        
        showSuccess(resume, error);
        return true;
    }

    function validateIdProof() {
        const idProof = document.getElementById('id_proof');
        const error = document.getElementById('id-proof-error');
        
        if (idProof.files.length > 0 && !validateFile(idProof, ['application/pdf', 'image/jpeg', 'image/png'])) {
            showError(idProof, error, 'Only PDF, JPG, or PNG files are allowed (max 2MB)');
            return false;
        }
        
        showSuccess(idProof, error);
        return true;
    }

    function validateSignedDoc() {
        const signedDoc = document.getElementById('signed_document');
        const error = document.getElementById('signed-doc-error');
        
        if (signedDoc.files.length > 0 && !validateFile(signedDoc, ['application/pdf', 'image/jpeg', 'image/png'])) {
            showError(signedDoc, error, 'Only PDF, JPG, or PNG files are allowed (max 2MB)');
            return false;
        }
        
        showSuccess(signedDoc, error);
        return true;
    }

    function validateTerms() {
        const terms = document.getElementById('emp_terms_accepted');
        const error = document.getElementById('terms-error');
        
        if (!terms.checked) {
            showError(terms, error, 'You must accept the terms and conditions');
            return false;
        }
        
        showSuccess(terms, error);
        return true;
    }

    // Helper function to validate files
    function validateFile(input, allowedTypes, fileIndex = 0) {
        const file = input.files[fileIndex];
        const maxSize = 2 * 1024 * 1024; // 2MB
        
        if (!file) return false;
        
        // Check file type
        let validType = false;
        const fileName = file.name.toLowerCase();
        
        if (allowedTypes.includes('application/pdf') && pdfRegex.test(fileName)) {
            validType = true;
        }
        if (allowedTypes.includes('image/jpeg') && /\.(jpg|jpeg)$/.test(fileName)) {
            validType = true;
        }
        if (allowedTypes.includes('image/png') && imageRegex.test(fileName)) {
            validType = true;
        }
        if (allowedTypes.includes('application/msword') && /\.doc$/.test(fileName)) {
            validType = true;
        }
        if (allowedTypes.includes('application/vnd.openxmlformats-officedocument.wordprocessingml.document') && /\.docx$/.test(fileName)) {
            validType = true;
        }
        
        if (!validType) return false;
        if (file.size > maxSize) return false;
        
        return true;
    }

    // Main form validation function
    function validateForm() {
        let isValid = true;
        
        // Personal Information
        if (!validateName()) isValid = false;
        if (!validateEmail()) isValid = false;
        if (!validateDOB()) isValid = false;
        if (!validateMobile()) isValid = false;
        
        // Address Information
        if (!validateAddress()) isValid = false;
        if (!validateCity()) isValid = false;
        if (!validateState()) isValid = false;
        if (!validateZipcode()) isValid = false;
        
        // Bank Details
        if (!validateBank()) isValid = false;
        if (!validateAccount()) isValid = false;
        if (!validateIFSC()) isValid = false;
        if (!validateBankBranch()) isValid = false;
        
        // Employment Details
        if (!validateJobRole()) isValid = false;
        if (!validateDepartment()) isValid = false;
        if (!validateExperienceStatus()) isValid = false;
        
        if (experienceStatus.value === 'Experienced') {
            if (!validateCompany()) isValid = false;
            if (!validateExpYears()) isValid = false;
            if (!validateSalarySlip()) isValid = false;
            if (!validateUAN()) isValid = false;
            if (!validatePF()) isValid = false;
            if (!validateOfferLetter()) isValid = false;
            if (!validateRelievingLetter()) isValid = false;
            if (!validateExperienceCertificate()) isValid = false;
        }

        if (!validateJoiningDate()) isValid = false;
        if (!validateProfilePic()) isValid = false;

        // Education Documents
        if (!validateSSCSchool()) isValid = false;
        if (!validateSSCYear()) isValid = false;
        if (!validateSSCGrade()) isValid = false;
        if (!validateSSCDoc()) isValid = false;

        if (!validateInterCollege()) isValid = false;
        if (!validateInterYear()) isValid = false;
        if (!validateInterGrade()) isValid = false;
        if (!validateInterBranch()) isValid = false;
        if (!validateInterDoc()) isValid = false;

        if (!validateGradCollege()) isValid = false;
        if (!validateGradYear()) isValid = false;
        if (!validateGradGrade()) isValid = false;
        if (!validateGradDegree()) isValid = false;
        if (!validateGradBranch()) isValid = false;
        if (!validateGradDoc()) isValid = false;

        // Additional Documents
        if (!validateResume()) isValid = false;
        if (!validateIdProof()) isValid = false;
        if (!validateSignedDoc()) isValid = false;

        // Terms and Conditions
        if (!validateTerms()) isValid = false;

        // Validate education year sequence
        if (!validateEducationYearSequence()) isValid = false;

        if (!isValid) {
            // Scroll to the first error
            const firstError = document.querySelector('.invalid');
            if (firstError) {
                firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
            alert('Please correct the errors in the form before submitting.');
        }

        return isValid;
    }
});
</script>
</body>
</html>